/**
 * @Author:wanghongxin and fuwei
 * @Time:Mon Jun 29 2015 16:13:59 GMT+0800 (modified by wanghongxin)
 */
!function e(n,t,i){function o(s,r){if(!t[s]){if(!n[s]){var c="function"==typeof require&&require;if(!r&&c)return c(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+s+"'")}var u=t[s]={exports:{}};n[s][0].call(u.exports,function(e){var t=n[s][1][e];return o(t?t:e)},u,u.exports,e,n,t,i)}return t[s].exports}for(var a="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e){!function(n,t){var i=e("./lib/audio.js"),o=e("./lib/side.js"),a=e("./lib/banner.js"),s=e("./lib/interaction.js"),r=e("./lib/share.js"),c=window.www5cn;t.call(n,i,o,a,s,r,c)}(this,function(e,n,t,i,o,a){var s;e.init(a.music.src),$.ajax({url:"http://userservice.5.cn/inner/user/getUserByUserID.json",type:"post",dataType:"json",data:{params:JSON.stringify({userID:a.uid||"123"})},success:function(e){var t=window.location.href;e.avater=e.data.image,e.user={avatar:e.data.image,name:e.data.name,liked:e.data.myFavouriteMsgCount,fans:e.data.followerCount,observers:e.data.followCount},e.magazine={saved:a.magazine.saved,readed:a.magazine.readed},e.audio={name:a.music.name,src:a.music.src};var o={back:"javascript:;",reviews:"javascript:;",good:"javascript:;",share:"javascript:;",comment:a.magazine.comment,saved:a.magazine.saved};e.user.message="javascript:;",e.user.attention="javascript:;",ldzx.config.isApp?(e.user.hotUrl=t+"#hot",e.user.homeUrl=t+"#home",e.user.downloadUrl=t+"#download",e.user.newestUrl=t+"#newest",e.user.recommendUrl=t+"#recommend",e.user.restMagazineUrl=t+"#rest",e.user.message=t+"#message",e.user.attention=t+"#attention",o.back=t+"#back",o.reviews=t+"#reviews",o.good=t+"#good",o.share=t+"#share"):(e.user.hotUrl="http://mookservice.5.cn/page/installApp.json",e.user.homeUrl="http://mookservice.5.cn/page/installApp.json",e.user.downloadUrl="http://mookservice.5.cn/page/installApp.json",e.user.newestUrl="http://mookservice.5.cn/page/installApp.json",e.user.recommendUrl="http://mookservice.5.cn/page/installApp.json",e.user.restMagazineUrl="http://mookservice.5.cn/page/installApp.json",e.user.message="http://mookservice.5.cn/page/installApp.json",e.user.attention="http://mookservice.5.cn/page/installApp.json",o.back="http://mookservice.5.cn/page/installApp.json",o.reviews="http://mookservice.5.cn/page/installApp.json",o.good="http://mookservice.5.cn/page/installApp.json",o.share="http://mookservice.5.cn/page/installApp.json"),e.isApp=ldzx.config.isApp,e.attentioned=ldzx.config.attentioned,$.extend(a,e),e.side=a.side,n(e,ldzx.config||{attentioned:!1,isApp:!1}),i(o,ldzx.config||{saved:!1}),$.ajax({url:"http://mookservice.5.cn/inner/magazine/status.json",data:{params:JSON.stringify({topicid:a.magaId||"123"})},dataType:"json",success:function(e){200===e.code&&(e=e.obj,$(".i-reviews").next().html(e.comment),$(".i-good").next().html(e.favorite))}})}}),t(100,{"gdt_banner.js":[1,80],"5cn_banner.js":[81,100]},"http://img0.hx.com/magazine0120/js/"),o(a.wx),s={setComment:function(e){$(".i-reviews").next().html(e)},setSaved:function(e,n){var t=$(".i-good");t.next().html(n),e?t.css("backgroundPosition","0 -218px"):t.css("backgroundPosition","0 -115px")},setAttention:function(e){var n=$(".reputation").find("span").eq(2);e?($(".attention").html("取消关注"),n.html(parseInt(n.html())+1)):($(".attention").html("关 注"),n.html(parseInt(n.html())-1))}},ldzx.ctrl=ldzx.ctrl||{},$.extend(ldzx.ctrl,s)})},{"./lib/audio.js":2,"./lib/banner.js":3,"./lib/interaction.js":5,"./lib/share.js":6,"./lib/side.js":7}],2:[function(e,n){!function(t,i){e("./coffee.js"),e("../vender/touch.js"),n.exports=i.call(t,$)}(this,function(e){function n(n){if(n){var t={loop:!0,preload:"auto",src:n};for(var i in t)t.hasOwnProperty(i)&&i in a&&(a[i]=t[i]);window.audio=a,a.load();var r='<section class="u-audio"><p id="coffee_flow" class="btn_audio"><strong class="txt_audio z-hide">关闭</strong><span class="css_sprite01 audio_open"></span></p></section>';e(r).prependTo(e("body")),e("#coffee_flow").coffee({steams:["<img src='http://www5.5.cn/Public/newimages/audio_widget_01@2x.png' />","<img src='http://www5.5.cn/Public/newimages/audio_widget_01@2x.png' />"],steamHeight:100,steamWidth:44}),o.audioPlay(),e(".u-audio").on("tap",function(){s=!s,s?o.audioPlay():o.audioPause()})}}function t(){a.play(),e.fn.coffee.start(),e(".coffee-steam-box").show(500)}function i(){a.pause(),e.fn.coffee.stop(),e(".coffee-steam-box").hide(500)}var o={audioPlay:t,audioPause:i,init:n},a=new Audio,s=!0;return o})},{"../vender/touch.js":9,"./coffee.js":4}],3:[function(e,n){!function(e,t){var i=window.$,o=window.cut;n.exports=t.call(e,i,o)}(this,function(e,n){var t=function(e){return Math.random()*e|1},i=function(n){var t=document.createElement("script");t.src=n,e("body").append(t)},o=function(o,a,s){n.reinit(e(window).height()-100);var r=t(o);for(var c in a)a.hasOwnProperty(c)&&a[c][0]<=r&&r<=a[c][1]&&i((s?s:"")+c)};return o})},{}],4:[function(){!function(e,n){function t(e){return e.replace(/([a-z])([A-Z])/,"$1-$2").toLowerCase()}function i(e){return o?o+e:e.toLowerCase()}var o,a,s,r,c,u,l,d,f,p,m="",h={Webkit:"webkit",Moz:"",O:"o"},g=window.document,w=g.createElement("div"),v=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,x={};e.each(h,function(e,t){return w.style[e+"TransitionProperty"]!==n?(m="-"+e.toLowerCase()+"-",o=t,!1):void 0}),a=m+"transform",x[s=m+"transition-property"]=x[r=m+"transition-duration"]=x[u=m+"transition-delay"]=x[c=m+"transition-timing-function"]=x[l=m+"animation-name"]=x[d=m+"animation-duration"]=x[p=m+"animation-delay"]=x[f=m+"animation-timing-function"]="",e.fx={off:o===n&&w.style.transitionProperty===n,speeds:{_default:400,fast:200,slow:600},cssPrefix:m,transitionEnd:i("TransitionEnd"),animationEnd:i("AnimationEnd")},e.fn.animate=function(t,i,o,a,s){return e.isFunction(i)&&(a=i,o=n,i=n),e.isFunction(o)&&(a=o,o=n),e.isPlainObject(i)&&(o=i.easing,a=i.complete,s=i.delay,i=i.duration),i&&(i=("number"==typeof i?i:e.fx.speeds[i]||e.fx.speeds._default)/1e3),s&&(s=parseFloat(s)/1e3),this.anim(t,i,o,a,s)},e.fn.anim=function(i,o,m,h,g){var w,y,b,j={},_="",T=this,k=e.fx.transitionEnd,S=!1;if(o===n&&(o=e.fx.speeds._default/1e3),g===n&&(g=0),e.fx.off&&(o=0),"string"==typeof i)j[l]=i,j[d]=o+"s",j[p]=g+"s",j[f]=m||"linear",k=e.fx.animationEnd;else{y=[];for(w in i)v.test(w)?_+=w+"("+i[w]+") ":(j[w]=i[w],y.push(t(w)));_&&(j[a]=_,y.push(a)),o>0&&"object"==typeof i&&(j[s]=y.join(", "),j[r]=o+"s",j[u]=g+"s",j[c]=m||"linear")}return b=function(n){if("undefined"!=typeof n){if(n.target!==n.currentTarget)return;e(n.target).unbind(k,b)}else e(this).unbind(k,b);S=!0,e(this).css(x),h&&h.call(this)},o>0&&(this.bind(k,b),setTimeout(function(){S||b.call(T)},1e3*o+25)),this.size()&&this.get(0).clientLeft,this.css(j),0>=o&&setTimeout(function(){T.each(function(){b.call(this)})},0),this},w=null}(Zepto),function(e){e.fn.coffee=function(n){function t(){var n=s(8,f.steamMaxSize),t=a(1,f.steamsFontFamily),i="#"+a(6,"0123456789ABCDEF"),o=s(0,44),c=s(-90,89),u=r(.4,1),d=e.fx.cssPrefix+"transform";d=d+":rotate("+c+"deg) scale("+u+");";var h=e('<span class="coffee-steam">'+a(1,f.steams)+"</span>"),g=s(0,p-f.steamWidth-n);g>o&&(g=s(0,o)),h.css({position:"absolute",left:o,top:f.steamHeight,"font-size:":n+"px",color:i,"font-family":t,display:"block",opacity:1}).attr("style",h.attr("style")+d).appendTo(m).animate({top:s(f.steamHeight/2,0),left:g,opacity:0},s(f.steamFlyTime/2,1.2*f.steamFlyTime),l,function(){h.remove(),h=null})}function o(){var e=s(-10,10);e+=parseInt(m.css("left")),e>=54?e=54:34>=e&&(e=34),m.animate({left:e},s(1e3,3e3),l)}function a(e,n){e=e||1;var t="",o=n.length-1,a=0;for(i=0;i<e;i++)a=s(0,o-1),t+=n.slice(a,a+1);return t}function s(e,n){var t=n-e,i=e+Math.round(Math.random()*t);return parseInt(i)}function r(e,n){var t=n-e,i=e+Math.random()*t;return parseFloat(i)}var c=null,u=null,l="cubic-bezier(.09,.64,.16,.94)",d=e(this),f=e.extend({},e.fn.coffee.defaults,n),p=f.steamWidth,m=e('<div class="coffee-steam-box"></div>').css({height:f.steamHeight,width:f.steamWidth,left:60,top:-50,position:"absolute",overflow:"hidden","z-index":0}).appendTo(d);return e.fn.coffee.stop=function(){clearInterval(c),clearInterval(u)},e.fn.coffee.start=function(){c=setInterval(function(){t()},s(f.steamInterval/2,2*f.steamInterval)),u=setInterval(function(){o()},s(100,1e3)+s(1e3,3e3))},d},e.fn.coffee.defaults={steams:["jQuery","HTML5","HTML6","CSS2","CSS3","JS","$.fn()","char","short","if","float","else","type","case","function","travel","return","array()","empty()","eval","C++","JAVA","PHP","JSP",".NET","while","this","$.find();","float","$.ajax()","addClass","width","height","Click","each","animate","cookie","bug","Design","Julying","$(this)","i++","Chrome","Firefox","Firebug","IE6","Guitar","Music","攻城师","旅行","王子墨","啤酒"],steamsFontFamily:["Verdana","Geneva","Comic Sans MS","MS Serif","Lucida Sans Unicode","Times New Roman","Trebuchet MS","Arial","Courier New","Georgia"],steamFlyTime:5e3,steamInterval:500,steamMaxSize:30,steamHeight:200,steamWidth:300},e.fn.coffee.version="2.0.0"}(Zepto)},{}],5:[function(e,n){"use strict";!function(t,i){var o=window._,a=window.$;e("../vender/touch.js"),n.exports=i.call(t,o,a)}(this,function(e,n){return function(t,i){function o(){d?(c.removeClass("show"),u.removeClass("show"),l.removeClass("show"),d=!d,e.delay(function(){c.css("display","none")},300)):(c.css("display","block"),e.delay(function(){c.addClass("show"),u.addClass("show"),l.addClass("show"),d=!d},10))}var a=n("#inter").html(),s=e.template(a);n("body").prepend(s(t));var r=n(document),c=n(".inter"),u=n(".right_menu"),l=n(".left_menu"),d=!0;r.on("tap",".p-ct",o),e.delay(function(){c.addClass("show"),u.addClass("show"),l.addClass("show")},300),i.saved&&n(".i-good").css("backgroundPosition","0 -218px")}})},{"../vender/touch.js":9}],6:[function(e,n){"use strict";!function(t,i){var o=window.$;e("./weixin.js"),n.exports=i.call(t,o)}(this,function(e){return function(n){e(document.body).wx(n)}})},{"./weixin.js":8}],7:[function(e,n){"use strict";!function(t,i){var o=window._,a=window.$;e("../vender/touch.js");var s=window.cut,r=window.www5cn;n.exports=i.call(t,o,a,s,r)}(this,function(e,n,t){return function(i,o){function a(){m.on("tap",r),h.on("tap",u),v.on("tap",f),n(".catalogueContent div").on("tap",d),c(),n(window).on("cut",s),o.attentioned&&n(".attention").html("取消关注"),g.on("touchmove",function(e){e.preventDefault()})}function s(e,n){y.html(n+1+"/"+b)}function r(){l(),w.removeClass("f-hide"),t.page_stop(),e.delay(function(){w.addClass("f-show")},100),e.delay(function(){g.addClass("f-hide")},300)}function c(){var e=n(window).height()-200,t=e/4-10;x.each(function(e,i){n(i).css({height:t+"px"})})}function u(){l(),g.removeClass("f-hide"),w.addClass("f-hide"),t.page_stop(),e.delay(function(){g.addClass("f-show")},100)}function l(){g.removeClass("f-show"),w.removeClass("f-show")}function d(){var e=n(this).index();t._pageNow!==e&&(t.toSlide(e),f(),t.page_start(),n(window).trigger("cut",[e]))}function f(){g.removeClass("f-show"),w.removeClass("f-show"),e.delay(function(){w.addClass("f-hide"),g.addClass("f-hide")},300),t._pageNum>1&&t.page_start()}{var p=e.template(n("#sidejs").html());832==n(window).height()}n("body").prepend(p(i));var m=n(".left_menu"),h=n(".right_menu"),g=n(".right_side"),w=n(".left_side"),v=n(".back"),x=n(".smallImg"),y=n("#pageIndex"),b=(n(".inter"),n(".catalogueFoter"),t._pageNum);a()}})},{"../vender/touch.js":9}],8:[function(){!function(e){e.fn.wx=function(n){function t(e,n){var i=2e3;n=n||0,!0===window.G_WEIXIN_READY||"WeixinJSBridge"in window?e.apply(null,[]):i>=n&&setTimeout(function(){t(e,n++)},15)}var i=e(this),o=e.extend({},e.fn.wx.defaults,n);document.addEventListener("WeixinJSBridgeReady",function(){window.G_WEIXIN_READY=!0},!1);var a={execHandler:function(e){if(e&&e instanceof Object){var n=e.callback||null,t=e.args||[],i=e.context||null,o=e.delay||-1;n&&n instanceof Function&&("number"==typeof o&&o>=0?setTimeout(function(){n.apply(i,t)},o):n.apply(i,t))}},execAfterMergerHandler:function(e,n){if(e&&e instanceof Object){var t=e.args||[];e.args=n.concat(t)}this.execHandler(e)}},s={Share:{weibo:function(e,n){t(function(){WeixinJSBridge.on("menu:share:weibo",function(){WeixinJSBridge.invoke("shareWeibo",e,function(e){a.execAfterMergerHandler(n,[e])})})})},timeline:function(e,n){t(function(){WeixinJSBridge.on("menu:share:timeline",function(){WeixinJSBridge.invoke("shareTimeline",e,function(e){"share_timeline:ok"==e.err_msg&&a.execAfterMergerHandler(n,[e])})})})},message:function(e,n){t(function(){WeixinJSBridge.on("menu:share:appmessage",function(){WeixinJSBridge.invoke("sendAppMessage",e,function(e){("send_app_msg:ok"==e.err_msg||"send_app_msg:confirm"==e.err_msg)&&a.execAfterMergerHandler(n,[e])})})})}},setToolbar:function(e,n){t(function(){WeixinJSBridge.call(!0===e?"showToolbar":"hideToolbar"),a.execAfterMergerHandler(n,[e])})},setOptionMenu:function(e,n){t(function(){WeixinJSBridge.call(!0===e?"showOptionMenu":"hideOptionMenu"),a.execAfterMergerHandler(n,[e])})},pay:function(e,n){t(function(){var t={appId:"",timeStamp:"",nonceStr:"","package":"",signType:"",paySign:""},i=n||{},o=null,s=[e];for(var r in t)t.hasOwnProperty(r)&&(t[r]=e[r]||"");WeixinJSBridge.invoke("getBrandWCPayRequest",t,function(e){var n="get_brand_wcpay_request:";switch(e.err_msg){case n+"ok":o=i.success;break;case n+"fail":o=i.fail||i.error;break;case n+"cancel":o=i.cancel||i.error;break;default:o=i.error}a.execAfterMergerHandler(o,s)})})}},r={content:o.con},c={img_url:o.img,img_width:180,img_height:180,link:o.link,desc:o.con,title:o.title};return handler={callback:function(){window.location.href="http://www.5.cn/wap/share?url="+document.URL}},s.Share.timeline(c,handler),s.Share.message(c,handler),s.Share.weibo(r,handler),i},e.fn.wx.defaults={title:"5cn,我为你传媒,制作你自己的微杂志",con:"不一样的阅读新方式.颠覆手机新体验！",link:document.URL,img:location.protocol+"//"+location.hostname+":"+location.port+"/magtemplate/one/img/5.jpg?time=1"},e.fn.wx.version="1.0.0"}(Zepto)},{}],9:[function(){!function(e){function n(e,n,t,i){return Math.abs(e-n)>=Math.abs(t-i)?e-n>0?"Left":"Right":t-i>0?"Up":"Down"}function t(){l=null,f.last&&(f.el.trigger("longTap"),f={})}function i(){l&&clearTimeout(l),l=null}function o(){r&&clearTimeout(r),c&&clearTimeout(c),u&&clearTimeout(u),l&&clearTimeout(l),r=c=u=l=null,f={}}function a(e){return("touch"==e.pointerType||e.pointerType==e.MSPOINTER_TYPE_TOUCH)&&e.isPrimary}function s(e,n){return e.type=="pointer"+n||e.type.toLowerCase()=="mspointer"+n}var r,c,u,l,d,f={},p=750;e(document).ready(function(){var m,h,g,w,v=0,x=0;"MSGesture"in window&&(d=new MSGesture,d.target=document.body),e(document).bind("MSGestureEnd",function(e){var n=e.velocityX>1?"Right":e.velocityX<-1?"Left":e.velocityY>1?"Down":e.velocityY<-1?"Up":null;n&&(f.el.trigger("swipe"),f.el.trigger("swipe"+n))}).on("touchstart MSPointerDown pointerdown",function(n){(!(w=s(n,"down"))||a(n))&&(g=w?n:n.touches[0],n.touches&&1===n.touches.length&&f.x2&&(f.x2=void 0,f.y2=void 0),m=Date.now(),h=m-(f.last||m),f.el=e("tagName"in g.target?g.target:g.target.parentNode),r&&clearTimeout(r),f.x1=g.pageX,f.y1=g.pageY,h>0&&250>=h&&(f.isDoubleTap=!0),f.last=m,l=setTimeout(t,p),d&&w&&d.addPointer(n.pointerId))}).on("touchmove MSPointerMove pointermove",function(e){(!(w=s(e,"move"))||a(e))&&(g=w?e:e.touches[0],i(),f.x2=g.pageX,f.y2=g.pageY,v+=Math.abs(f.x1-f.x2),x+=Math.abs(f.y1-f.y2))}).on("touchend MSPointerUp pointerup",function(t){(!(w=s(t,"up"))||a(t))&&(i(),f.x2&&Math.abs(f.x1-f.x2)>30||f.y2&&Math.abs(f.y1-f.y2)>30?u=setTimeout(function(){f.el.trigger("swipe"),f.el.trigger("swipe"+n(f.x1,f.x2,f.y1,f.y2)),f={}},0):"last"in f&&(30>v&&30>x?c=setTimeout(function(){var n=e.Event("tap");n.cancelTouch=o,f.el.trigger(n),f.isDoubleTap?(f.el&&f.el.trigger("doubleTap"),f={}):r=setTimeout(function(){r=null,f.el&&f.el.trigger("singleTap"),f={}},250)},0):f={}),v=x=0)}).on("touchcancel MSPointerCancel pointercancel",o),e(window).on("scroll",o)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(n){e.fn[n]=function(e){return this.on(n,e)}})}(Zepto)},{}]},{},[1]);
//# sourceMappingURL=maps/follow.min.js.map